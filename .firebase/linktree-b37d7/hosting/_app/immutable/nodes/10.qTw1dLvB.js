import{s as $,v as G,h as M,e as v,i as S,a as b,l as O,k as j,b as D,d as w,z as H}from"../chunks/scheduler.DfGOlq3b.js";import{S as ee,i as te,d as E,v as se,g as ae,h as ne,m as oe,t as re,e as ie,j as le,a as _,b as u,c as U,f as k,l as ce}from"../chunks/index.BzQEtMZ_.js";import{A as W}from"../chunks/AuthCheck.xyOzPo3I.js";import{b as A,u as B,d as T,e as V,f as Y,g as Z,h as J,r as K,i as Q}from"../chunks/firebase.C_6QoUeW.js";const R="src/routes/login/photo/+page.svelte";function q(o){let e,r="Uploading...",l,s;const t={c:function(){e=v("p"),e.textContent=r,l=S(),s=v("progress"),this.h()},l:function(n){e=b(n,"P",{"data-svelte-h":!0}),O(e)!=="svelte-be0b5h"&&(e.textContent=r),l=j(n),s=b(n,"PROGRESS",{class:!0}),D(s).forEach(_),this.h()},h:function(){w(e,R,47,8,1551),u(s,"class","progress progress-info w-56 mt-6"),w(s,R,48,8,1579)},m:function(n,p){U(n,e,p),U(n,l,p),U(n,s,p)},d:function(n){n&&(_(e),_(l),_(s))}};return E("SvelteRegisterBlock",{block:t,id:q.name,type:"if",source:"(43:6) {#if uploading}",ctx:o}),t}function X(o){let e,r="Upload a Profile Picture",l,s,t,a,n,p,m,g,i="Pick a File",L,d,C,x,z,f=o[1]&&q(o);const N={c:function(){e=v("h2"),e.textContent=r,l=S(),s=v("form"),t=v("div"),a=v("img"),p=S(),m=v("label"),g=v("span"),g.textContent=i,L=S(),d=v("input"),C=S(),f&&f.c(),this.h()},l:function(c){e=b(c,"H2",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-sqqhy9"&&(e.textContent=r),l=j(c),s=b(c,"FORM",{class:!0});var y=D(s);t=b(y,"DIV",{class:!0});var h=D(t);a=b(h,"IMG",{src:!0,alt:!0,width:!0,height:!0,class:!0}),p=j(h),m=b(h,"LABEL",{for:!0,class:!0});var F=D(m);g=b(F,"SPAN",{class:!0,"data-svelte-h":!0}),O(g)!=="svelte-n8v7pv"&&(g.textContent=i),F.forEach(_),L=j(h),d=b(h,"INPUT",{name:!0,type:!0,class:!0,accept:!0}),C=j(h),f&&f.l(h),h.forEach(_),y.forEach(_),this.h()},h:function(){var c;u(e,"class","card-title"),w(e,R,23,2,707),H(a.src,n=o[0]??((c=o[2])==null?void 0:c.photoURL)??"https://static.vecteezy.com/system/resources/previews/019/879/186/original/user-icon-on-transparent-background-free-png.png")||u(a,"src",n),u(a,"alt","photoURL"),u(a,"width","256"),u(a,"height","256"),u(a,"class","profile-image mx-auto s-hZfY0tLdIh2a"),w(a,R,27,6,880),u(g,"class","label-text"),w(g,R,37,8,1244),u(m,"for","photoURL"),u(m,"class","label"),w(m,R,36,6,1199),u(d,"name","photoURL"),u(d,"type","file"),u(d,"class","file-input file-input-bordered w-full max-w-xs"),u(d,"accept","image/png, image/jpeg, image/gif, image/webp"),w(d,R,39,6,1309),u(t,"class","form control w-full max-w-xs my-10 mx-auto text-center"),w(t,R,26,4,805),u(s,"class","max-w-screen-md w-full"),w(s,R,25,2,763)},m:function(c,y){U(c,e,y),U(c,l,y),U(c,s,y),k(s,t),k(t,a),k(t,p),k(t,m),k(m,g),k(t,L),k(t,d),k(t,C),f&&f.m(t,null),x||(z=ce(d,"change",o[3],!1,!1,!1,!1),x=!0)},p:function(c,y){var h;y&5&&!H(a.src,n=c[0]??((h=c[2])==null?void 0:h.photoURL)??"https://static.vecteezy.com/system/resources/previews/019/879/186/original/user-icon-on-transparent-background-free-png.png")&&u(a,"src",n),c[1]?f||(f=q(c),f.c(),f.m(t,null)):f&&(f.d(1),f=null)},d:function(c){c&&(_(e),_(l),_(s)),f&&f.d(),x=!1,z()}};return E("SvelteRegisterBlock",{block:N,id:X.name,type:"slot",source:"(19:0) <AuthCheck>",ctx:o}),N}function I(o){let e,r;e=new W({props:{$$slots:{default:[X]},$$scope:{ctx:o}},$$inline:!0});const l={c:function(){ae(e.$$.fragment)},l:function(t){ne(e.$$.fragment,t)},m:function(t,a){oe(e,t,a),r=!0},p:function(t,[a]){const n={};a&39&&(n.$$scope={dirty:a,ctx:t}),e.$set(n)},i:function(t){r||(re(e.$$.fragment,t),r=!0)},o:function(t){ie(e.$$.fragment,t),r=!1},d:function(t){le(e,t)}};return E("SvelteRegisterBlock",{block:l,id:I.name,type:"component",source:"",ctx:o}),l}function ue(o,e,r){let l,s;G(A,"user"),M(o,A,i=>r(4,l=i)),G(B,"userData"),M(o,B,i=>r(2,s=i));let{$$slots:t={},$$scope:a}=e;se("Page",t,[]);let n,p=!1;async function m(i){r(1,p=!0);const L=i.target.files[0];r(0,n=URL.createObjectURL(L));const d=K(T,`users/${l.uid}/profile.png`),C=await Q(d,L),x=await J(C.ref);await Z(Y(V,"users",l.uid),{photoURL:x}),r(1,p=!1)}const g=[];return Object.keys(e).forEach(i=>{!~g.indexOf(i)&&i.slice(0,2)!=="$$"&&i!=="slot"&&console.warn(`<Page> was created with unknown prop '${i}'`)}),o.$capture_state=()=>({AuthCheck:W,user:A,userData:B,storage:T,db:V,doc:Y,updateDoc:Z,getDownloadURL:J,ref:K,uploadBytes:Q,previewURL:n,uploading:p,upload:m,$user:l,$userData:s}),o.$inject_state=i=>{"previewURL"in i&&r(0,n=i.previewURL),"uploading"in i&&r(1,p=i.uploading)},e&&"$$inject"in e&&o.$inject_state(e.$$inject),[n,p,s,m]}class he extends ee{constructor(e){super(e),te(this,e,ue,I,$,{}),E("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:I.name})}}export{he as component};
